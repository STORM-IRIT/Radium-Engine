<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Radium Engine: KeyMapping</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSsymbols.js", "TeX/AMSmath.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="radium-logo.webp"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Radium Engine
   &#160;<span id="projectnumber">1.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('develkeymapping.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">KeyMapping</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1 empty">
    <ul>
      <li class="level2">
        <a href="#autotoc_md57">Introduction</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md58">Usage</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md59">Implementation note</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md60">Key mapping and inheritence</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md61">Callback manager</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md62">Limits</a>
      </li>
    </ul>
  </li>
</ul>
</div>
<div class="textblock"><h2><a class="anchor" id="autotoc_md57"></a>
Introduction</h2>
<p>KeyMapping is defined around two concepts, context (<a class="el" href="classRa_1_1Gui_1_1KeyMappingManager.html#a78183dd70a4a26eec1f46c0b523ddc18" title="handle to a Context">Ra::Gui::KeyMappingManager::Context</a>) and action (<a class="el" href="classRa_1_1Gui_1_1KeyMappingManager.html#a41a05099c01660b695cdb70be3eb1655" title="handle to an action">Ra::Gui::KeyMappingManager::KeyMappingAction</a>). An action is associated to an event binding (<a class="el" href="classRa_1_1Gui_1_1KeyMappingManager_1_1EventBinding.html" title="Inner class to store event binding.">Ra::Gui::KeyMappingManager::EventBinding</a>), this binding represents the input (mouse, keys, modifiers) that are associated with the action. The context allows to use same binding for different actions depending of the considered context. The first widget that receive input event needs to manage contexts and determine which context to use to request corresponding action. Typically the viewer is this first widget, and can decide which context to use depending on what is under mouse, if gizmo edit is enable, or if an active camera manipulator is active. Action, context and binding are managed with <a class="el" href="classRa_1_1Gui_1_1KeyMappingManager.html" title="An utility class used to map a (combination of) key / modifiers / mouse buttons to a specific action....">Ra::Gui::KeyMappingManager</a> singleton.</p>
<p>Context and action are simply indices (handle) stored in the key mapping manager, they are associated with <a class="elRef" target="_blank" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> name, to ease user key mapping management. Typical usage is to have one context per class that may have its specific key mapping actions.</p>
<p>On the user side, one can test which action corresponds to a given binding (the one that triggers the event for instance), or use <a class="el" href="classRa_1_1Gui_1_1KeyMappingCallbackManager.html" title="This class manage a collection of binding/callback associated with a context.">Ra::Gui::KeyMappingCallbackManager</a> to trigger registered callback.</p>
<h2><a class="anchor" id="autotoc_md58"></a>
Usage</h2>
<p>First step is to add the context, the actions and associated bindings to the manager. To this end you can either use configuration file or call <a class="el" href="classRa_1_1Gui_1_1KeyMappingManager.html#a333fc2c96c69caee3a8a96245eee8e05" title="Creates the context index for the given context name.">Ra::Gui::KeyMappingManager::addContext</a> and <a class="el" href="classRa_1_1Gui_1_1KeyMappingManager.html#ab95c41c67b46756514b13cfa0f4d5136">Ra::Gui::KeyMappingManager::addAction</a>.</p>
<h3>Configuration file</h3>
<p>This can be done with a xml configuration file. Viewer and camera manipulator basic configuration file is bundled with radium install (located in the <code>install_dir/Configs/</code> folder). You can extends edit this file or copy it somewhere else, and load it with <a class="el" href="classRa_1_1Gui_1_1KeyMappingManager.html#a13dcf060b7ef48066af54fd566750cb8">Ra::Gui::KeyMappingManager::loadConfiguration</a>.</p>
<p>This file as an only <code>keymaps</code> node, with one <code>keymap</code> node per binding.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">keymaps</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">keymap</span> <span class="keyword">context</span>=<span class="stringliteral">&quot;CONTEXT&quot;</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;KEY&quot;</span> <span class="keyword">modifiers</span>=<span class="stringliteral">&quot;MODIFIERS&quot;</span> <span class="keyword">buttons</span>=<span class="stringliteral">&quot;BUTTONS&quot;</span> <span class="keyword">wheel</span>=<span class="stringliteral">&quot;WHEEL&quot;</span> <span class="keyword">action</span>=<span class="stringliteral">&quot;ACTION&quot;</span> /&gt;</div>
<div class="line">    <span class="comment">&lt;!-- as many entry as needed --&gt;</span></div>
<div class="line">&lt;/<span class="keywordtype">keymaps</span>&gt;</div>
</div><!-- fragment --><p>Default values are in [ ]</p>
<ul>
<li><code>ACTION</code> <em>mandatory</em> represents the KeyMappingAction enum's value you want to trigger.</li>
<li><code>CONTEXT</code> [AppContext] represents the context, for instance the class that will try to catch this keymapping</li>
<li><code>KEY</code> [-1] represents the key that need to be pressed to trigger the event (ie <code>Key_Z</code>, for example), "" or "-1" or absent correspond to no key needed.</li>
<li><code>MODIFIERS</code> [NoModifiers] represents the modifier used along with key or mouse button (needs to be a <code>Qt::Modifier</code> enum value) to trigger the action. Multiples modifiers can be specified, separated by commas as in <code>"ControlModifier,ShiftModifier"</code>.</li>
<li><code>BUTTONS</code> [NoButtons] represents the button to trigger the event (i.e. <code>LeftButton</code>, for example).</li>
<li><code>WHEEL</code> [false] if true, it's a wheel event ! (anything else is false).</li>
</ul>
<p>If only a key is defined then it's a <code>keyPressedEvent</code>. If buttons is defined, then it's a <code>mouse[move/press/release]Event</code>, that optionally take modifiers and key into account. If wheel is true, then it's a wheel event, that optionally take modifiers, buttons and key into account.</p>
<h3>Implementation</h3>
<p>On the implementation side, your class <code>C</code> need (could) derive from <code>KeyMappingManageable&lt;C&gt;</code>, it defines the static member variable <code>m_keyMappingContext</code>, and the static function <code>configureKeyMapping()</code>, that calls <code>configureKeyMapping_impl()</code>, which have to be implemented in your class <code>C</code>.</p>
<p>Then you can store your specific actions as static member of your class, to ease checking which action is triggered.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span><a class="code hl_class" href="classDummy.html">Dummy</a> : <span class="keyword">public</span> <a class="code hl_class" href="classRa_1_1Gui_1_1KeyMappingManageable.html">KeyMappingManageable</a>&lt;Dummy&gt;</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code hl_class" href="classRa_1_1Gui_1_1KeyMappingManageable.html">KeyMappingManageable</a>&lt;<a class="code hl_class" href="classDummy.html">Dummy</a>&gt;;</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> configureKeyMapping_impl();</div>
<div class="line">    <span class="keyword">static</span> <a class="code hl_typedef" href="classRa_1_1Gui_1_1KeyMappingManager.html#a41a05099c01660b695cdb70be3eb1655">KeyMappingManager::KeyMappingAction</a> m_myAction;</div>
<div class="line"> </div>
</div><!-- fragment --><p>Define the static action variable in .cpp </p><div class="fragment"><div class="line"><a class="code hl_typedef" href="classRa_1_1Gui_1_1KeyMappingManager.html#a41a05099c01660b695cdb70be3eb1655">KeyMappingManager::KeyMappingAction</a> Dummy::m_myAction;</div>
</div><!-- fragment --><p>And <code>configureKeyMapping_impl</code> which will be called by KeyMappingManager on configuration changes. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> Dummy::configureKeyMapping_impl() {</div>
<div class="line">    <a class="code hl_class" href="classRa_1_1Gui_1_1KeyMappingManageable.html">KeyMappingManageable&lt;Dummy&gt;::setContext</a>(</div>
<div class="line">        Gui::KeyMappingManager::getInstance()-&gt;getContext( <span class="stringliteral">&quot;DummyContext&quot;</span> ) );</div>
<div class="line">    <span class="keywordflow">if</span> ( getContext().isInvalid() ) {</div>
<div class="line">        LOG( Ra::Core::Utils::logINFO )</div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot;DummyContext not defined (maybe the configuration file do not contains it)&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    m_myAction =</div>
<div class="line">        Ra::Gui::KeyMappingManager::getInstance()-&gt;getAction( getContext(), <span class="stringliteral">&quot;MyActionName&quot;</span> );</div>
</div><!-- fragment --><p>And also add a listener so key mapping context and action handles are updated in case of new configuration load. This can be done typically in application or viewer constructor, but after KeyMappingManager instance is created. </p><div class="fragment"><div class="line">            Gui::KeyMappingManager::getInstance()-&gt;addListener( <a class="code hl_function" href="classRa_1_1Gui_1_1KeyMappingManageable.html#a32756ab3dce798b29ccad350f7c815ec">Dummy::configureKeyMapping</a> );</div>
</div><!-- fragment --><p>To ease the initialization of Action handles, you can use macro as shown in <a class="el" href="Viewer_8hpp_source.html">Viewer.hpp</a> and <a class="el" href="Viewer_8cpp_source.html">Viewer.cpp</a> (KeyMappingViewer and KMA_VALUE).</p>
<h2><a class="anchor" id="autotoc_md59"></a>
Implementation note</h2>
<p>The viewer is the main entry point to dispatch key and mouse event. The idea is that at a key press or mouse press event, the viewer is capable of determining which class will receive the events.</p>
<p>For instance see <code><a class="el" href="Viewer_8cpp_source.html">Viewer.cpp</a></code> <code>Viewer::mousePressEvent</code>: </p><div class="fragment"><div class="line">    <span class="keyword">auto</span> buttons   = <span class="keyword">event</span>-&gt;buttons();</div>
<div class="line">    <span class="keyword">auto</span> modifiers = <span class="keyword">event</span>-&gt;modifiers();</div>
<div class="line">    <span class="keyword">auto</span> key       = activeKey();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// nothing under mouse ? juste move the camera ...</span></div>
<div class="line">    <span class="keywordflow">if</span> ( result.getRoIdx().isInvalid() ) {</div>
<div class="line">        <span class="keywordflow">if</span> ( m_camera-&gt;handleMousePressEvent( event, buttons, modifiers, key ) ) {</div>
<div class="line">            m_activeContext = m_camera-&gt;mappingContext();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="comment">// should not pass here, since viewerContext is only for valid picking ...</span></div>
<div class="line">            m_activeContext = KeyMappingManageable::getContext();</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md60"></a>
Key mapping and inheritence</h2>
<p>If you want to define a derived class that inherits a base class with key mapping, and you want to have key mapping management in this derived, you have to consider the following implementation details:</p>
<ul>
<li>Base and derived classes will have two different contexts if the derived class also implements KeyMappingManageable, if not derived class can use the base class context.</li>
<li>Derived <code>setupKeymappingcallbacks</code> should call base <code>setupKeymappingcallbacks</code>, hence derived <code>configureKeymapping_impl</code> should only care about its own <code>KeyMappingAction</code>.</li>
</ul>
<p>Here is an example snippets.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>MyViewer : <span class="keyword">public</span> <a class="code hl_class" href="classRa_1_1Gui_1_1Viewer.html">Ra::Gui::Viewer</a>, <span class="keyword">public</span> <a class="code hl_class" href="classRa_1_1Gui_1_1KeyMappingManageable.html">Ra::Gui::KeyMappingManageable</a>&lt;MyViewer&gt;</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using </span>baseKeyMapping = <a class="code hl_class" href="classRa_1_1Gui_1_1KeyMappingManageable.html">Ra::Gui::KeyMappingManageable&lt;Ra::Gui::Viewer&gt;</a>;</div>
<div class="line">    <span class="keyword">using </span>thisKeyMapping = <a class="code hl_class" href="classRa_1_1Gui_1_1KeyMappingManageable.html">Ra::Gui::KeyMappingManageable&lt;MyViewer&gt;</a>;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classRa_1_1Gui_1_1Viewer.html#aaae0a0c0c419bd1dc8f0296214120a7d">setupKeyMappingCallbacks</a>() <span class="keyword">override</span>;</div>
<div class="line">    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code hl_class" href="classRa_1_1Gui_1_1KeyMappingManageable.html">Ra::Gui::KeyMappingManageable</a>&lt;MyViewer&gt;;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//[...]</span></div>
<div class="line"><span class="preprocessor">#define KeyMappingMyViewer \</span></div>
<div class="line"><span class="preprocessor">    KMA_VALUE( MY_ACTION )</span></div>
<div class="line"><span class="comment">//[...]</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span>  MyViewer::setupKeyMappingCallbacks() {</div>
<div class="line"> <span class="comment">// Setup keymapping for base</span></div>
<div class="line">    base::setupKeyMappingCallbacks();</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// then extend</span></div>
<div class="line">    <span class="keyword">auto</span> keyMappingManager = Gui::KeyMappingManager::getInstance();</div>
<div class="line">    keyMappingManager-&gt;addListener( thisKeyMapping::configureKeyMapping );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> MyViewer::configureKeyMapping_impl() {</div>
<div class="line">    <span class="keyword">auto</span> keyMappingManager              = Gui::KeyMappingManager::getInstance();</div>
<div class="line">    thisKeyMapping::m_keyMappingContext = keyMappingManager-&gt;getContext( <span class="stringliteral">&quot;MyViewerContext&quot;</span> );</div>
<div class="line">    <span class="keywordflow">if</span> ( thisKeyMapping::m_keyMappingContext.isInvalid() )</div>
<div class="line">    {</div>
<div class="line">        LOG( logINFO ) &lt;&lt; <span class="stringliteral">&quot;MyViewerContext not defined (maybe the configuration file do not contains it)&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define KMA_VALUE( XX ) XX = keyMappingManager-&gt;getActionIndex( thisKeyMapping::m_keyMappingContext, #XX );</span></div>
<div class="line"> </div>
<div class="line"> KeyMappingMyViewer</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#undef KMA_VALUE</span></div>
<div class="line">}</div>
<div class="ttc" id="aclassRa_1_1Gui_1_1KeyMappingManageable_html"><div class="ttname"><a href="classRa_1_1Gui_1_1KeyMappingManageable.html">Ra::Gui::KeyMappingManageable</a></div><div class="ttdoc">KeyMappingManageable decorator to use as CRTP.</div><div class="ttdef"><b>Definition</b> <a href="KeyMappingManager_8hpp_source.html#l00243">KeyMappingManager.hpp:244</a></div></div>
<div class="ttc" id="aclassRa_1_1Gui_1_1Viewer_html"><div class="ttname"><a href="classRa_1_1Gui_1_1Viewer.html">Ra::Gui::Viewer</a></div><div class="ttdef"><b>Definition</b> <a href="Viewer_8hpp_source.html#l00053">Viewer.hpp:54</a></div></div>
<div class="ttc" id="aclassRa_1_1Gui_1_1Viewer_html_aaae0a0c0c419bd1dc8f0296214120a7d"><div class="ttname"><a href="classRa_1_1Gui_1_1Viewer.html#aaae0a0c0c419bd1dc8f0296214120a7d">Ra::Gui::Viewer::setupKeyMappingCallbacks</a></div><div class="ttdeci">virtual void setupKeyMappingCallbacks()</div><div class="ttdoc">add observers to keyMappingManager for gizmo, camera and viewer.</div><div class="ttdef"><b>Definition</b> <a href="Viewer_8cpp_source.html#l00074">Viewer.cpp:74</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md61"></a>
Callback manager</h2>
<p>An easy way to manage action callback is to use KeyMappingCallbackManager. This manager is a class member, initialized with Context. One can register callback (std::function&lt;void(QEvent*)&gt;) that is triggered if the input event corresponds to the event binding.</p>
<p>The callback is responsible to test if the event corresponds to an event it can handle.</p>
<dl class="section note"><dt>Note</dt><dd>KeyPress and KeyRelease event both trigger the callback associated with a key event, in the callback you can use event-&gt;type() to check whether it's a key press or key release (or mouse move) event</dd></dl>
<p>Example usage</p>
<div class="fragment"><div class="line"><span class="comment">// during setup, once keymapping action are initialized</span></div>
<div class="line">m_keyMappingCallbackManager.addEventCallback( TRACKBALLCAMERA_ZOOM,</div>
<div class="line">                                              [=]( QEvent* event ) { zoomCallback( event ); } );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// the callback is triggered for any binding corresponding to the action, what ever the event type.</span></div>
<div class="line"><span class="comment">// one can check event type to decide how to handle the action, here zoom is handled for both mouse move or wheel</span></div>
<div class="line"><span class="comment">// Note that when zoomCallback is triggered, it corresponds to the config file binding, including key or modifiers, so you don&#39;t have to check again.</span></div>
<div class="line"><span class="keywordtype">void</span> TrackballCameraManipulator::zoomCallback( QEvent* event ) {</div>
<div class="line">    <span class="keywordflow">if</span> ( event-&gt;type() == QEvent::MouseMove ) {</div>
<div class="line">        <span class="keyword">auto</span> mouseEvent = <span class="keyword">reinterpret_cast&lt;</span>QMouseEvent*<span class="keyword">&gt;</span>( event );</div>
<div class="line">        <span class="keyword">auto</span> [dx, dy]   = computeDeltaMouseMove( mouseEvent );</div>
<div class="line">        handleCameraZoom( dx, dy );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( event-&gt;type() == QEvent::Wheel ) {</div>
<div class="line">        <span class="keyword">auto</span> wheelEvent = <span class="keyword">reinterpret_cast&lt;</span>QWheelEvent*<span class="keyword">&gt;</span>( event );</div>
<div class="line">        handleCameraZoom(</div>
<div class="line">            ( wheelEvent-&gt;angleDelta().y() * 0.01_ra + wheelEvent-&gt;angleDelta().x() * 0.01_ra ) *</div>
<div class="line">            m_wheelSpeedModifier );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// handle the event is then</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="classRa_1_1Gui_1_1TrackballCameraManipulator.html#a7a6555b6bf0c1ad891b915c18366fba4">TrackballCameraManipulator::handleMousePressEvent</a>( QMouseEvent* event,</div>
<div class="line">                                                        <span class="keyword">const</span> Qt::MouseButtons&amp; buttons,</div>
<div class="line">                                                        <span class="keyword">const</span> Qt::KeyboardModifiers&amp; modifiers,</div>
<div class="line">                                                        <span class="keywordtype">int</span> key ) {</div>
<div class="line"><span class="comment">// here callback manager check if there an action associated to event,key and then trigger the associated callback.</span></div>
<div class="line">    <span class="keywordtype">bool</span> handled = m_keyMappingCallbackManager.triggerEventCallback( event, key );</div>
<div class="line">    <span class="keywordflow">return</span> handled;</div>
<div class="line">}</div>
<div class="ttc" id="aclassRa_1_1Gui_1_1TrackballCameraManipulator_html_a7a6555b6bf0c1ad891b915c18366fba4"><div class="ttname"><a href="classRa_1_1Gui_1_1TrackballCameraManipulator.html#a7a6555b6bf0c1ad891b915c18366fba4">Ra::Gui::TrackballCameraManipulator::handleMousePressEvent</a></div><div class="ttdeci">bool handleMousePressEvent(QMouseEvent *event, const Qt::MouseButtons &amp;buttons, const Qt::KeyboardModifiers &amp;modifiers, int key) override</div><div class="ttdef"><b>Definition</b> <a href="TrackballCameraManipulator_8cpp_source.html#l00197">TrackballCameraManipulator.cpp:197</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md62"></a>
Limits</h2>
<ul>
<li>Multiple keys/buttons are not yet implemented. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="conceptsmanual.html">Radium Concepts</a></li><li class="navelem"><a class="el" href="api.html">API</a></li><li class="navelem"><a class="el" href="gui.html">Gui</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
