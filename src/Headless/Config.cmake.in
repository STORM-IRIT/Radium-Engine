# -------------- Configuration of the Radium Engine targets and definitions ---------------------
# Setup Headless and check for dependencies

if (Headless_FOUND AND NOT TARGET Headless)
    set(CONFIGURE_HEADLESS ON)
    # verify dependencies
    if(NOT Engine_FOUND)
        if(EXISTS "${CMAKE_CURRENT_LIST_DIR}/../Engine/RadiumEngineConfig.cmake")
            set(Engine_FOUND TRUE)
            include(${CMAKE_CURRENT_LIST_DIR}/../Engine/RadiumEngineConfig.cmake)
        else()
            set(Radium_FOUND False)
            set(Radium_NOTFOUND_MESSAGE "Radium::Headless: dependency Engine not found")
            set(CONFIGURE_HEADLESS OFF)
        endif()
    endif()
    if(NOT IO_FOUND)
        if(EXISTS "${CMAKE_CURRENT_LIST_DIR}/../IO/RadiumIOConfig.cmake")
            set(IO_FOUND TRUE)
            include(${CMAKE_CURRENT_LIST_DIR}/../IO/RadiumIOConfig.cmake)
        else()
            set(Radium_FOUND False)
            set(Radium_NOTFOUND_MESSAGE "Radium::Headless: dependency IO not found")
            set(CONFIGURE_HEADLESS OFF)
        endif()
    endif()
endif()

if(CONFIGURE_HEADLESS)
    # find dependency on glfw
    if (NOT glfw3_FOUND)
        find_dependency(glfw3 3.3 REQUIRED)
    endif()
    include("${CMAKE_CURRENT_LIST_DIR}/HeadlessTargets.cmake")
endif()
