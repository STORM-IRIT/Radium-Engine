<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Radium Engine: Forward Render</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSsymbols.js", "TeX/AMSmath.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<!-- ... other metadata & script includes ... -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
 DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
 DoxygenAwesomeFragmentCopyButton.init()
</script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
 DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="radium-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Radium Engine
   &#160;<span id="projectnumber">1.4.11</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('forwardRenderer.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Forward Render </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md32">1. Depth, ambient color and &quot;deferred info&quot; pass</a></li>
<li class="level1"><a href="#autotoc_md33">2. Lighting pass</a></li>
<li class="level1"><a href="#autotoc_md34">3. Ordered independent transparency</a></li>
<li class="level1"><a href="#autotoc_md35">4. Post-process the whole &lt;em&gt;render pass&lt;/em&gt;</a></li>
<li class="level1"><a href="#autotoc_md36">5. Debug and UI render objects</a></li>
<li class="level1"><a href="#autotoc_md37">6. Write final texture to framebuffer / backbuffer</a></li>
</ul>
</div>
<div class="textblock"><p>The main renderer of Radium, implemented in the class <a class="el" href="classRa_1_1Engine_1_1Rendering_1_1ForwardRenderer.html">Ra::Engine::Rendering::ForwardRenderer</a> implements a Z-pre-pass forward rendering loop. Even if the material association to a drawable object, realized by the so called <a class="el" href="classRa_1_1Engine_1_1Rendering_1_1RenderTechnique.html">Ra::Engine::Rendering::RenderTechnique</a> is tightly coupled with the main rendering loop, Plugins might define new renderers and interact differently with shader and materials properties (see chapter on <a class="el" href="develmaterials.html">Materials</a> ).</p>
<p>Here is a summary of the different passes of the <a class="el" href="classRa_1_1Engine_1_1Rendering_1_1ForwardRenderer.html">Ra::Engine::Rendering::ForwardRenderer</a></p>
<h1><a class="anchor" id="autotoc_md32"></a>
1. Depth, ambient color and "deferred info" pass</h1>
<p>This pass</p>
<ul>
<li>only concerns opaque objects AND opaque fragment on transparent objects. It is mainly used to fill in the Z-buffer, allowing to activate early z-test for next passes since the depth buffer is already filled,</li>
<li>initialize the color buffer by computing e.g. the ambient color for each object,</li>
<li>generate several pictures of the scene allowing to implement composition effects later :<ul>
<li>saves the world-space normals for each object,</li>
<li>saves the "Diffuse" aspect of the object,</li>
<li>saves the "Specular" aspect of the object.</li>
</ul>
</li>
</ul>
<p>In this pass, each <a class="el" href="classRa_1_1Engine_1_1Rendering_1_1RenderObject.html">Ra::Engine::Rendering::RenderObject</a> is drawn with the Ra::Engine::Rendering::Z_PREPASS argument so that the corresponding shader (if it exists) will be activated before draw call. (<code>ro-&gt;render( renderParameters, viewingParameters, DefaultRenderingPasses::Z_PREPASS );</code>)</p>
<p>Note that the shader associated to the Ra::Engine::Rendering::Z_PREPASS pass must draw only fully opaque fragments. Fully transparent ones (rejected by a masking information such as mask texture) and blend-able ones (those with an opacity factor alpha les than one) must be discarded.</p>
<h1><a class="anchor" id="autotoc_md33"></a>
2. Lighting pass</h1>
<p>This pass is a classic forward lighting pass that accumulates the color of each light source. Before this pass, blending (one, one) is enabled and it does</p>
<div class="fragment"><div class="line">for each light do</div>
<div class="line">  Get light parameters</div>
<div class="line">  for each object</div>
<div class="line">    bind shader</div>
<div class="line">    bind material &amp; light</div>
<div class="line">    render mesh</div>
<div class="line">  done</div>
<div class="line">done</div>
</div><!-- fragment --><p>In this pass, each RenderObject drawn with the Ra::Engine::Rendering::LIGHTING_OPAQUE argument so that the corresponding shader will be activated before draw call. (<code>ro-&gt;render( renderParameters, viewingParameters, DefaultRenderingPasses::LIGHTING_OPAQUE );</code>)</p>
<p>Note that the shader associated to the Ra::Engine::Rendering::LIGHTING_OPAQUE pass must lit and draw only fully opaque fragments. Fully transparent ones (rejected by a masking information such as mask texture) and blend-able ones (those with an opacity factor alpha les than one) must be discarded.</p>
<h1><a class="anchor" id="autotoc_md34"></a>
3. Ordered independent transparency</h1>
<p>Rendering transparent objects in Radium is done according to the algorithm described in</p>
<ul>
<li>Weighted Blended Order-Independent Transparency, Morgan McGuire, Louis Bavoil - NVIDIA, Journal of Computer Graphics Techniques (JCGT), vol. 2, no. 2, 122-141, 2013, <a href="http://jcgt.org/published/0002/02/09/">http://jcgt.org/published/0002/02/09/</a></li>
</ul>
<p>This pass contains one scene rendering pass and one composition pass.</p>
<ul>
<li>The scene rendering pass must compute both the accumulation buffer and the coverage buffer as described in the paper (see the Material documentation for example of shader.). It is realized the same way than the lighting pass but only fragments that are transparent must be lit and drawn.</li>
<li>The composition pass then adds to the color buffer the resulting blended color.</li>
</ul>
<h1><a class="anchor" id="autotoc_md35"></a>
4. Post-process the whole &lt;em&gt;render pass&lt;/em&gt;</h1>
<p>This pass takes the color buffer, representing colors in linear RGB space) and apply gamma correction to the image</p>
<h1><a class="anchor" id="autotoc_md36"></a>
5. Debug and UI render objects</h1>
<p>Those objects are drawn with their own shader, and without lighting. They do not write in the depth map but they have different depth testing behaviour :</p>
<ul>
<li>func is <code>LESS</code> for debug objects (drawn only if visible)</li>
<li>func is <code>ALWAYS</code> for UI objects (drawn in front of everything else)</li>
</ul>
<h1><a class="anchor" id="autotoc_md37"></a>
6. Write final texture to framebuffer / backbuffer</h1>
<p>This method is just responsible for displaying the final stuff on screen or on the saved FBO. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="conceptsmanual.html">Radium Concepts</a></li>
    <li class="footer">Generated on Mon Apr 3 2023 06:30:54 for Radium Engine by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
