<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Radium Engine: Rendering pipeline</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSsymbols.js", "TeX/AMSmath.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<!-- ... other metadata & script includes ... -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
 DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
 DoxygenAwesomeFragmentCopyButton.init()
</script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
 DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="radium-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Radium Engine
   &#160;<span id="projectnumber">1.5.10</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('develrendering.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Rendering pipeline</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md118">Rendering in Radium</a><ul><li class="level2"><a href="#autotoc_md119">Main abstract render method</a></li>
<li class="level2"><a href="#autotoc_md120">Defining a concrete renderer</a></li>
<li class="level2"><a href="#autotoc_md121">Minimal renderer howto</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md122">Radium Engine default rendering information</a></li>
<li class="level1"><a href="#autotoc_md123">Potential extensions for the renderer</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md118"></a>
Rendering in Radium</h1>
<p>Rendering in Radium is managed by the abstract <a class="el" href="classRa_1_1Engine_1_1Rendering_1_1Renderer.html">Ra::Engine::Rendering::Renderer</a> class that provides the following main rendering method.</p>
<h2><a class="anchor" id="autotoc_md119"></a>
Main abstract render method</h2>
<p>This method is general and cannot be modified, it always does the following</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classRa_1_1Engine_1_1Rendering_1_1Renderer.html#a027cf22a1f9f48ea9f7dd7fae7108856">Ra::Engine::Rendering::Renderer::render</a>( <span class="keyword">const</span> Ra::Engine::ViewingParameters&amp; data )</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// 0. Save an eventual already bound FBO</span></div>
<div class="line">  saveExternalFBOInternal();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// 1. Gather render objects and update them</span></div>
<div class="line">  <a class="code hl_typedef" href="namespaceRa_1_1Core.html#a3b5d52baa689ad80e5e1d84a25838769">renderObjects</a> = m_engine-&gt;getRenderObjectManager()-&gt;getRenderObjects();</div>
<div class="line">  updateRenderObjectsInternal( data, <a class="code hl_typedef" href="namespaceRa_1_1Core.html#a3b5d52baa689ad80e5e1d84a25838769">renderObjects</a> );</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// 2. Feed render queues</span></div>
<div class="line">  feedRenderQueuesInternal( data, <a class="code hl_typedef" href="namespaceRa_1_1Core.html#a3b5d52baa689ad80e5e1d84a25838769">renderObjects</a> );</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// 3. Do picking if needed</span></div>
<div class="line">  <span class="keywordflow">if</span> ( !m_pickingQueries.empty() )</div>
<div class="line">  {</div>
<div class="line">    doPicking();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// 4. Do the rendering.</span></div>
<div class="line">  <a class="code hl_function" href="classRa_1_1Engine_1_1Rendering_1_1Renderer.html#afe2f99ba86df2575f32a79d3d01d8d2f">renderInternal</a>( data );</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// 5. Post processing</span></div>
<div class="line">  <a class="code hl_function" href="classRa_1_1Engine_1_1Rendering_1_1Renderer.html#a5fc9b2cb6c8fb0a7d1a7640a2ddc31b6">postProcessInternal</a>( data );</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// 6. Write final texture to framebuffer / backbuffer</span></div>
<div class="line">  <span class="comment">// (depending on wether anything was saved on step 0. or not)</span></div>
<div class="line">  drawScreenInternal();</div>
<div class="line">}</div>
<div class="ttc" id="aclassRa_1_1Engine_1_1Rendering_1_1Renderer_html_a027cf22a1f9f48ea9f7dd7fae7108856"><div class="ttname"><a href="classRa_1_1Engine_1_1Rendering_1_1Renderer.html#a027cf22a1f9f48ea9f7dd7fae7108856">Ra::Engine::Rendering::Renderer::render</a></div><div class="ttdeci">void render(const Data::ViewingParameters &amp;renderData)</div><div class="ttdoc">Tell the renderer it needs to render. This method does the following steps :</div><div class="ttdef"><b>Definition</b> <a href="Renderer_8cpp_source.html#l00315">Renderer.cpp:315</a></div></div>
<div class="ttc" id="aclassRa_1_1Engine_1_1Rendering_1_1Renderer_html_a5fc9b2cb6c8fb0a7d1a7640a2ddc31b6"><div class="ttname"><a href="classRa_1_1Engine_1_1Rendering_1_1Renderer.html#a5fc9b2cb6c8fb0a7d1a7640a2ddc31b6">Ra::Engine::Rendering::Renderer::postProcessInternal</a></div><div class="ttdeci">virtual void postProcessInternal(const Data::ViewingParameters &amp;renderData)=0</div><div class="ttdoc">Do all post processing stuff. If you override this method, be careful to fill.</div></div>
<div class="ttc" id="aclassRa_1_1Engine_1_1Rendering_1_1Renderer_html_afe2f99ba86df2575f32a79d3d01d8d2f"><div class="ttname"><a href="classRa_1_1Engine_1_1Rendering_1_1Renderer.html#afe2f99ba86df2575f32a79d3d01d8d2f">Ra::Engine::Rendering::Renderer::renderInternal</a></div><div class="ttdeci">virtual void renderInternal(const Data::ViewingParameters &amp;renderData)=0</div><div class="ttdoc">All the scene rendering magics basically happens here.</div></div>
<div class="ttc" id="anamespaceRa_1_1Core_html_a3b5d52baa689ad80e5e1d84a25838769"><div class="ttname"><a href="namespaceRa_1_1Core.html#a3b5d52baa689ad80e5e1d84a25838769">Ra::Core::AlignedStdVector</a></div><div class="ttdeci">std::vector&lt; T, Eigen::aligned_allocator&lt; T &gt; &gt; AlignedStdVector</div><div class="ttdef"><b>Definition</b> <a href="AlignedStdVector_8hpp_source.html#l00014">AlignedStdVector.hpp:14</a></div></div>
</div><!-- fragment --><p>The meaning of each rendering steps is described below.</p>
<h3>0. Save an eventual already bound FBO</h3>
<p>In some cases (like with <code>QtOpenGLWidget</code>), you do not draw directly on the screen, but you have instead to feed an already bound FBO. Since the default renderer uses multiple FBOs, the Qt's one must be saved.</p>
<p><em>This behaviour cannot be modified.</em></p>
<h3>1. Gather render objects and update them</h3>
<p>This construct the set of objects that must be drawn for the current frame and update their OpenGL state.</p>
<h3>2. Feed the render queue</h3>
<p>This construct the set of render actions that must be done for the current frame.</p>
<h3>3. Do picking if needed</h3>
<p>If there has been some picking requests since the last frame, <code>doPicking</code> is called. This function just renders all the objects (except <em>debug</em> ones) by drawing them in some color given the ID of the entity a render object is attached to.</p>
<p>Then, for each picking request done, <code>glReadPixels</code> is called at the requested location, and object ID is retrieved.</p>
<h3>4. Do the rendering</h3>
<p>This method does most of the whole rendering work and outputs one final <em>render pass</em> texture, ready to be post-processed.</p>
<h3>5. Post-process the rendering result</h3>
<p>This method will apply post-processing filters on the computed image.</p>
<h2><a class="anchor" id="autotoc_md120"></a>
Defining a concrete renderer</h2>
<p>To define a concrete renderer, the <a class="el" href="classRa_1_1Engine_1_1Rendering_1_1Renderer.html">Ra::Engine::Rendering::Renderer</a> class can be inherited to define, at least, the <code>renderInternal</code> method. Note that only two methods can be overridden for the renderer, renderInternal (step 4) and postProcessInternal (step 5).</p>
<p>A concrete renderer will build its rendering loop, the <code>renderInternal</code> method, by decomposing it into passes configured, for each Ra::engine::RenderObject, using the Ra::Engine::Rendering::RenderTechique class.</p>
<p>A <a class="el" href="classRa_1_1Engine_1_1Rendering_1_1RenderTechnique.html">Ra::Engine::Rendering::RenderTechnique</a> consists in a set of named <a class="el" href="classRa_1_1Engine_1_1Data_1_1ShaderConfiguration.html">Ra::Engine::Data::ShaderConfiguration</a> that provide the GLSL code used by each pass to compute the appearance of a <a class="el" href="classRa_1_1Engine_1_1Rendering_1_1RenderObject.html">Ra::Engine::Rendering::RenderObject</a> and a set of <a class="el" href="classRa_1_1Engine_1_1Data_1_1ShaderParameterProvider.html">Ra::Engine::Data::ShaderParameterProvider</a> that provide shader data to be used for each pass.</p>
<p>When rendering, the renderer will loop over all the configured <a class="el" href="classRa_1_1Engine_1_1Rendering_1_1RenderObject.html">Ra::Engine::Rendering::RenderObject</a> and, for each rendering pass, will get the OpenGL pipeline configuration and parameters from the <a class="el" href="classRa_1_1Engine_1_1Rendering_1_1RenderTechnique.html">Ra::Engine::Rendering::RenderTechnique</a> associated with the <a class="el" href="classRa_1_1Engine_1_1Rendering_1_1RenderObject.html">Ra::Engine::Rendering::RenderObject</a>.</p>
<p>The Radium Engine exports a ready to use renderer, <a class="el" href="classRa_1_1Engine_1_1Rendering_1_1ForwardRenderer.html">Ra::Engine::Rendering::ForwardRenderer</a>, that decomposes the rendering into three passes as described in the <a class="el" href="forwardRenderer.html">Forward Render</a> document.</p>
<h2><a class="anchor" id="autotoc_md121"></a>
Minimal renderer howto</h2>
<p>This section explain, through the developement of a simple Rendering, how to configure RenderObjects and RenderTechnique to be used by a renderer.</p>
<h3>Developping the Rendering</h3>
<p>Help wanted for this section.</p>
<h3>Configuring the RenderObjects and their RenderTechnique</h3>
<p>Help wanted for this section.</p>
<h1><a class="anchor" id="autotoc_md122"></a>
Radium Engine default rendering information</h1>
<p>See <a class="el" href="develmaterials.html">Material management</a> documentation for a complete description of the interactions geometry, material and shader._</p>
<h1><a class="anchor" id="autotoc_md123"></a>
Potential extensions for the renderer</h1>
<ul>
<li>Ambient occlusion</li>
<li>Shadow mapping</li>
<li>Skybox</li>
<li>Reflection / refraction</li>
<li>Tonemapping (only gamma correction is applied for now)</li>
<li>Bloom</li>
<li>Motion blur</li>
<li>FOV</li>
<li>Physically based rendering </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="develmanual.html">Developer manual</a></li><li class="navelem"><a class="el" href="api.html">API</a></li><li class="navelem"><a class="el" href="engine.html">Engine</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
