<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Radium Engine: Radium Build Chain</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSsymbols.js", "TeX/AMSmath.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="radium-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Radium Engine
   &#160;<span id="projectnumber">da2cfe3f756a26a62e745168da86b0404fdc1889</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('develbuildchain.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Radium Build Chain </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md44">Installation directory</a></li>
<li class="level1"><a href="#autotoc_md45">Radium Libraries</a><ul><li class="level2"><a href="#autotoc_md46">Overview</a></li>
<li class="level2"><a href="#autotoc_md47">Dependencies between libraries</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md48">External dependencies</a><ul><li class="level2"><a href="#autotoc_md49">Fetch and build at configure time</a></li>
<li class="level2"><a href="#autotoc_md50">Building and installing Radium dependencies once for all</a></li>
<li class="level2"><a href="#autotoc_md51">User provided external dependencies</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md52">Coverage</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md44"></a>
Installation directory</h1>
<p>By default, <code>${CMAKE_INSTALL_PREFIX}</code> is set as follow:</p>
<ul>
<li>For release build :</li>
</ul>
<div class="fragment"><div class="line">set(RADIUM_BUNDLE_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/Bundle-${CMAKE_CXX_COMPILER_ID})</div>
</div><!-- fragment --><ul>
<li>For Debug or RelWithDebInfo build</li>
</ul>
<div class="fragment"><div class="line">set(RADIUM_BUNDLE_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/Bundle-${CMAKE_CXX_COMPILER_ID}-${CMAKE_BUILD_TYPE})</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md45"></a>
Radium Libraries</h1>
<h2><a class="anchor" id="autotoc_md46"></a>
Overview</h2>
<p>Radium is split in 5 libraries: Core, Engine, Gui, UI and PluginBase. The compilation of each library is controlled by the following cmake options</p>
<div class="fragment"><div class="line">option(RADIUM_GENERATE_LIB_CORE       &quot;Include Radium::Core in CMake project&quot; ON)</div>
<div class="line">option(RADIUM_GENERATE_LIB_IO         &quot;Include Radium::IO in CMake project&quot; ON)</div>
<div class="line">option(RADIUM_GENERATE_LIB_ENGINE     &quot;Include Radium::Engine in CMake project&quot; ON)</div>
<div class="line">option(RADIUM_GENERATE_LIB_GUI    &quot;Include Radium::Gui in CMake project&quot; ON)</div>
<div class="line">option(RADIUM_GENERATE_LIB_PLUGINBASE &quot;Include Radium::PluginBase in CMake project&quot; ON)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md47"></a>
Dependencies between libraries</h2>
<div class="fragment"><div class="line">add_dependencies (${ra_engine_target} PUBLIC Radium::Core)</div>
<div class="line">add_dependencies (${ra_io_target} PUBLIC Radium::Core)</div>
<div class="line">add_dependencies (${ra_pluginbase_target} Radium::Core Radium::Engine)</div>
<div class="line">add_dependencies (${ra_gui_target} PUBLIC Radium::Core Radium::Engine Radium::PluginBase Radium::IO)</div>
</div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>Consistency of <code>RADIUM_GENERATE_LIB_***</code> options is not checked wrt. the dependencies.</dd></dl>
<ul>
<li>When enabled using <code>RADIUM_GENERATE_LIB_***</code>, each library has a compilation target: <code>Core</code>, <code>Engine</code>, ...</li>
</ul>
<h1><a class="anchor" id="autotoc_md48"></a>
External dependencies</h1>
<p>External dependencies can be fetched and built at configure time or pre build once for allowing</p>
<h2><a class="anchor" id="autotoc_md49"></a>
Fetch and build at configure time</h2>
<p>Each library comes with its own dependencies, which are fetched and built at <b>configure</b> time:</p>
<div class="fragment"><div class="line">$ cmake .. -DRADIUM_GENERATE_LIB_IO=OFF -DRADIUM_GENERATE_LIB_ENGINE=OFF -DRADIUM_GENERATE_LIB_GUI=OFF -DRADIUM_GENERATE_LIB_PLUGINBASE=OFF -DRADIUM_ENABLE_TESTING=OFF</div>
<div class="line">Starting to parse CMake project.</div>
<div class="line">Externals will be built with 8 core(s)</div>
<div class="line">    == radiumproject Project configuration ==</div>
<div class="line">USE_GOLD_LINKER                           OFF</div>
<div class="line">Git Changeset: a65ec5d06d8aa207080a42935efd10435f230c38</div>
<div class="line">Can build doc?                            YES</div>
<div class="line">  + Graphviz/Dot - for generated graphs   YES</div>
<div class="line">Sanitizers:</div>
<div class="line">  + ADDRESS_SANITIZER                     OFF</div>
<div class="line">  + UB_SANITIZER                          OFF</div>
<div class="line">  + THREAD_SANITIZER                      OFF</div>
<div class="line">[addExternalFolder] process Core /*****/Radium-Engine/src/Core/external</div>
<div class="line">[addExternalFolder] Create temporary directory</div>
<div class="line">[addExternalFolder] Configure cmake project</div>
<div class="line">[addExternalFolder] Start build</div>
<div class="line">[addExternalFolder] Build ended</div>
<div class="line">[addExternalFolder] Configure package file /****/build-Radium-Engine-Desktop-Release/src/Core/external/cmake/package-Core.cmake</div>
<div class="line">Configure library Core with default settings</div>
<div class="line">clang-tidy - static analysis              NO</div>
<div class="line">cppcheck - static analysis                NO</div>
<div class="line">clang-format - code formating             YES</div>
<div class="line">Sanitizers:</div>
<div class="line">  + ADDRESS_SANITIZER                     OFF</div>
<div class="line">  + UB_SANITIZER                          OFF</div>
<div class="line">  + THREAD_SANITIZER                      OFF</div>
<div class="line">    == Final overview for radiumproject ==</div>
<div class="line">Version:               1.0.0 beta @ cezanne</div>
<div class="line">Install prefix:        ****/Bundle-GNU</div>
<div class="line">Compiler:              /usr/bin/g++</div>
<div class="line">CMAKE_BUILD_TYPE:      Release</div>
<div class="line">CMAKE_INSTALL_PREFIX:  ****/Bundle-GNU</div>
<div class="line">RADIUM_ENABLE_TESTING: OFF</div>
<div class="line">  possible options: Debug Release RelWithDebInfo MinSizeRel</div>
<div class="line">  set with ` cmake -DCMAKE_BUILD_TYPE=Debug .. `</div>
<div class="line">Configuring done</div>
<div class="line">Generating done</div>
<div class="line">CMake Project was parsed successfully.</div>
</div><!-- fragment --><p>What is happening here, is that the dependencies of Core are fetched using git, then configured using cmake, built, and installed to ${CMAKE_INSTALL_PREFIX} of Radium. </p><dl class="section see"><dt>See also</dt><dd>File <code>cmake/externalFunc.cmake</code> for technical details.</dd></dl>
<p>In order to save compilation time, dependencies are processed at the first run, and then skipped. To force processing again the dependencies of a given library, turn on the associated option</p>
<div class="fragment"><div class="line">OPTION( RADIUM_SKIP_${NAME_UPPER}_EXTERNAL &quot;[addExternalFolder] Skip updating ${NAME}::external (disable for rebuild)&quot; ON)</div>
</div><!-- fragment --><p>where <code>$NAME_UPPER</code> is <code>CORE</code>, <code>ENGINE</code>, <code>GUI</code>, <code>PLUGINBASE</code> or <code>IO</code>. </p><dl class="section note"><dt>Note</dt><dd>The option <code>RADIUM_SKIP_${NAME_UPPER}_EXTERNAL</code> is generated only if <code>RADIUM_GENERATE_LIB_${NAME_UPPER}</code> is <code>ON</code>.</dd></dl>
<h2><a class="anchor" id="autotoc_md50"></a>
Building and installing Radium dependencies once for all</h2>
<p>Radium dependencies can be built and installed alone, without building the whole Radium project.</p>
<p>The file <code>external/CMakeLists.txt</code> could be used as a standalone project to install all the Radium dependencies in any location <em>outside Radium-Engine source dir</em> (if you try to build and install external as a subdir of Radium-Engine source, cmake configuration will fail).</p>
<p>Configure dependencies build with :</p>
<div class="fragment"><div class="line">mkdir BuildRadiumDependencies &amp;&amp; cd BuildRadiumDependencies</div>
<div class="line">cmake -DCMAKE_INSTALL_PREFIX=/path/to/external/install /path/to/Radium/external</div>
</div><!-- fragment --><p>If not given on the command line, the installation directory is set by default to, <code>{CMAKE_CURRENT_BINARY_DIR}/Bundle-${CMAKE_CXX_COMPILER_ID}-${CMAKE_BUILD_TYPE}</code>.</p>
<p>Then to compile Radium-Engine, you have to give each dependency to the cmake command at configuration step. One easy way is to store your configuration in a file and use the <code>-C</code> option of cmake.</p>
<p>cmake config file <code>/path/to/myconfig.cmake</code>:</p>
<div class="fragment"><div class="line">#replace this one with you external install path</div>
<div class="line">set(RADIUM_DEP_PREFIX /path/to/external/install)</div>
<div class="line"> </div>
<div class="line">#set each external dirs</div>
<div class="line">set(Eigen3_DIR      ${RADIUM_DEP_PREFIX}/share/eigen3/cmake/ CACHE PATH &quot;My Eigen&quot;)</div>
<div class="line">set(OpenMesh_DIR    ${RADIUM_DEP_PREFIX}/share/OpenMesh/cmake/ CACHE PATH &quot;My OpenMesh&quot;)</div>
<div class="line">set(cpplocate_DIR   ${RADIUM_DEP_PREFIX}/share/cpplocate/ CACHE PATH &quot;My cpplocate&quot;)</div>
<div class="line">set(glm_DIR         ${RADIUM_DEP_PREFIX}/lib/cmake/glm/ CACHE PATH &quot;My glm&quot;)</div>
<div class="line">set(glbinding_DIR   ${RADIUM_DEP_PREFIX}/share/glbinding/ CACHE PATH &quot;My glbinding&quot;)</div>
<div class="line">set(globjects_DIR   ${RADIUM_DEP_PREFIX}/share/globjects/ CACHE PATH &quot;My globjects&quot;)</div>
<div class="line">set(stb_DIR         ${RADIUM_DEP_PREFIX}/include/stb/ CACHE PATH &quot;My stb&quot;)</div>
<div class="line">set(assimp_DIR      ${RADIUM_DEP_PREFIX}/lib/cmake/assimp-5.0/ CACHE PATH &quot;My assimp&quot;)</div>
<div class="line">set(tinyply_DIR     ${RADIUM_DEP_PREFIX}/lib/cmake/tinyply/  CACHE PATH &quot;My tinyply&quot;)</div>
</div><!-- fragment --><p>and call <code>cmake -C /path/to/myconfig.cmake ......</code></p>
<p>Another option is to provide each value direclty to the cmake command line with <code>-D</code> with:</p>
<div class="fragment"><div class="line">cmake \</div>
<div class="line">-DEigen3_DIR      /path/to/external/install/share/eigen3/cmake/ \</div>
<div class="line">-DOpenMesh_DIR    /path/to/external/install/share/OpenMesh/cmake/ \</div>
<div class="line">-Dcpplocate_DIR   /path/to/external/install/share/cpplocate/ \</div>
<div class="line">-Dglm_DIR         /path/to/external/install/lib/cmake/glm/ \</div>
<div class="line">-Dglbinding_DIR   /path/to/external/install/share/glbinding/ \</div>
<div class="line">-Dglobjects_DIR   /path/to/external/install/share/globjects/ \</div>
<div class="line">-Dstb_DIR         /path/to/external/install/include/stb/ \</div>
<div class="line">-Dassimp_DIR      /path/to/external/install/lib/cmake/assimp-5.0/ \</div>
<div class="line">-Dtinyply_DIR     /path/to/external/install/lib/cmake/tinyply/ \</div>
<div class="line">.......</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md51"></a>
User provided external dependencies</h2>
<p>You can use your own installation of a local dependency instead of letting cmake fetch and compile it. To this end, just provide the corresponding '*_DIR' to cmake at configuration time (with '-D' option, configuration file or toolchain file, please refer to cmake documentation).</p>
<p>Currently supported (note that these paths must refer to the installation directory of the corresponding library):</p>
<ul>
<li><code>assimp_DIR</code></li>
<li><code>tinyply_DIR</code></li>
<li><code>glm_DIR</code></li>
<li><code>glbinding_DIR</code></li>
<li><code>globjects_DIR</code></li>
<li><code>stb_DIR</code></li>
<li><code>Eigen3_DIR</code></li>
<li><code>OpenMesh_DIR</code></li>
<li><code>cpplocate_DIR</code></li>
</ul>
<p>Radium is compiled and tested with specific version of dependencies, as given in the external's folder CMakeLists.txt and state here for the record</p>
<ul>
<li>assimp: <a href="https://github.com/assimp/assimp.git,">https://github.com/assimp/assimp.git,</a> [tags/v5.0.1],<ul>
<li>with options <code>-DASSIMP_BUILD_ASSIMP_TOOLS=False -DASSIMP_BUILD_SAMPLES=False -DASSIMP_BUILD_TESTS=False -DIGNORE_GIT_HASH=True -DASSIMP_NO_EXPORT=True</code></li>
</ul>
</li>
<li>tinyply: <a href="https://github.com/ddiakopoulos/tinyply.git,">https://github.com/ddiakopoulos/tinyply.git,</a> [tags/2.3.2],<ul>
<li>with options <code>-DSHARED_LIB=TRUE</code></li>
</ul>
</li>
<li>glm: <a href="https://github.com/g-truc/glm.git,">https://github.com/g-truc/glm.git,</a> [0.9.9.5],<ul>
<li>with options <code>-DGLM_TEST_ENABLE=OFF -DBUILD_STATIC_LIBS=OFF -DCMAKE_INSTALL_LIBDIR=lib</code></li>
</ul>
</li>
<li>glbinding: <a href="https://github.com/cginternals/glbinding.git,">https://github.com/cginternals/glbinding.git,</a> [663e19cf1ae6a5fa1acfb1bd952fc43f647ca79c],<ul>
<li>with options <code>-DOPTION_BUILD_TESTS=OFF -DOPTION_BUILD_DOCS=OFF -DOPTION_BUILD_TOOLS=OFF -DOPTION_BUILD_EXAMPLES=OFF</code></li>
</ul>
</li>
<li>globjects: <a href="https://github.com/dlyr/globjects.git,">https://github.com/dlyr/globjects.git,</a> [11c559a07d9e310abb2f53725fd47cfaf538f8b1],<ul>
<li>with options <code>-DOPTION_BUILD_DOCS=OFF -DOPTION_BUILD_EXAMPLES=OFF -DOPTION_USE_EIGEN=ON -Dglbinding_DIR=${glbinding_DIR} -Dglm_DIR=${glm_DIR} -DEigen3_DIR=${Eigen3_DIR}</code></li>
</ul>
</li>
<li>stb: <a href="https://github.com/nothings/stb.git,">https://github.com/nothings/stb.git,</a> [1034f5e5c4809ea0a7f4387e0cd37c5184de3cdd],<ul>
<li>with options <code>None</code></li>
</ul>
</li>
<li>Eigen3: <a href="https://gitlab.com/libeigen/eigen.git,">https://gitlab.com/libeigen/eigen.git,</a> [e80ec243],<ul>
<li>with options <code>-DEIGEN_TEST_CXX11=OFF -DBUILD_TESTING=OFF</code></li>
</ul>
</li>
<li><a class="el" href="namespaceOpenMesh.html">OpenMesh</a>: <a href="https://www.graphics.rwth-aachen.de:9000/OpenMesh/OpenMesh.git,">https://www.graphics.rwth-aachen.de:9000/OpenMesh/OpenMesh.git,</a> [tags/OpenMesh-8.1],<ul>
<li>with options <code>-DBUILD_APPS=OFF</code></li>
</ul>
</li>
<li>cpplocate: <a href="https://github.com/cginternals/cpplocate.git,">https://github.com/cginternals/cpplocate.git,</a> [tags/v2.2.0],<ul>
<li>with options <code>-DOPTION_BUILD_TESTS=OFF -DOPTION_BUILD_DOCS=OFF</code></li>
</ul>
</li>
</ul>
<dl class="section warning"><dt>Warning</dt><dd>You have to take care of the consistency of the external dependencies, e.g. it's not possible to use your version of globjects without providing your version of eigen, otherwise you will have mixed version in Radium.</dd></dl>
<h1><a class="anchor" id="autotoc_md52"></a>
Coverage</h1>
<p>You can generate <a href="http://ltp.sourceforge.net/coverage/lcov.php"><code>lcov</code></a> output files to check tests coverage. To this end, both <code>RADIUM_ENABLE_TESTING=ON</code> and <code>RADIUM_ENABLE_COVERAGE=ON</code> have to be passed to cmake, works on Linux in Debug. Then the target <code>lcov-capture</code> builds and run all the necessary steps and produce a file <code>total.info</code> in your build dir. Please check CMakeLists.txt for the detailed steps, and <code>lcov documentation</code> for further processing of <code>total.info</code> to generate an html report. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="develmanual.html">Developer manual</a></li>
    <li class="footer">Generated on Tue Mar 16 2021 19:03:00 for Radium Engine by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
